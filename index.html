<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gradient Generator</title>
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.3.0/fonts/remixicon.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Boldonse&family=Noto+Sans+Sunuwar:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="modulepreload" href="app.js">
    <link rel="preload" href="./pkg/gradient_noise_wasm.js" as="script">
    <link rel="preload" href="./pkg/gradient_noise_wasm_bg.wasm" as="fetch" type="application/wasm" crossorigin>
</head>
<body>
    <div class="loading" id="loading">
        <div class="spinner"></div>
        <p>Loading Gradient Generator...</p>
    </div>

    <div class="app" id="app" style="display: none;">
        <canvas id="background-canvas" class="background-canvas"></canvas>
        <div class="canvas-container">
            <canvas id="canvas" width="2000" height="2000"></canvas>
        </div>
        
        <div class="controls">
            <div class="control-group">
                <h3>View</h3>

                <div class="control-item" style="margin-bottom:0px;">
                    <label>Aspect Ratio <span class="resolution-display" id="resolution-display">2000×2000</span></label>
                    <div class="custom-dropdown-container">
                        <div class="custom-dropdown" id="aspect-ratio-dropdown">
                            <div class="custom-dropdown-selected" id="aspect-ratio-selected">
                                <div class="option-left">
                                    <div class="aspect-ratio-visual" data-ratio="1:1"></div>
                                    <span class="aspect-name">Square</span>
                                </div>
                                <span class="aspect-ratio-suffix">1:1</span>
                                <i class="ri-arrow-down-s-line dropdown-arrow"></i>
                            </div>
                            <div class="custom-dropdown-options" id="aspect-ratio-options">
                                <!-- Options generated dynamically -->
                            </div>
                        </div>
                        <div class="dropdown-nav">
                            <button class="dropdown-nav-btn" data-direction="prev" data-target="aspect-ratio-dropdown" title="Previous">
                                <i class="ri-arrow-up-s-line"></i>
                            </button>
                            <button class="dropdown-nav-btn" data-direction="next" data-target="aspect-ratio-dropdown" title="Next">
                                <i class="ri-arrow-down-s-line"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="dimension-controls" id="dimension-controls">
                    <div class="control-item dimension-row">
                        <div class="dimension-group">
                            <label>Width</label>
                            <input type="number" class="dimension-input" id="width" min="200" max="8000" step="100" value="2000">
                        </div>
                        <div class="dimension-group">
                            <label>Height</label>
                            <input type="number" class="dimension-input" id="height" min="200" max="8000" step="100" value="2000">
                        </div>
                    </div>
                </div>

            </div>

            <div class="control-group">
                <div class="control-group-header">
                    <h3>Blending</h3>
                    <button class="randomize-colors-btn" id="randomize-blending" title="Randomize Parameters">
                        <i class="ri-dice-line"></i>
                    </button>
                </div>

                <div class="control-item">
                    <label>Mode</label>
                    <div class="custom-dropdown-container">
                        <div class="custom-dropdown" id="blend-mode-dropdown">
                            <div class="custom-dropdown-selected" id="blend-mode-selected">
                                <div class="option-left">
                                    <span class="blend-mode-name">Smooth Linear</span>
                                </div>
                                <i class="ri-arrow-down-s-line dropdown-arrow"></i>
                            </div>
                            <div class="custom-dropdown-options" id="blend-mode-options">
                                <div class="custom-dropdown-option" data-value="smooth">
                                    <div class="option-left">
                                        <span>Smooth Linear</span>
                                    </div>
                                </div>
                                <div class="custom-dropdown-option" data-value="radial">
                                    <div class="option-left">
                                        <span>Radial Burst</span>
                                    </div>
                                </div>
                                <div class="custom-dropdown-option" data-value="diamond">
                                    <div class="option-left">
                                        <span>Diamond Shape</span>
                                    </div>
                                </div>
                                <div class="custom-dropdown-option" data-value="vortex">
                                    <div class="option-left">
                                        <span>Swirling Vortex</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="dropdown-nav">
                            <button class="dropdown-nav-btn" data-direction="prev" data-target="blend-mode-dropdown" title="Previous">
                                <i class="ri-arrow-up-s-line"></i>
                            </button>
                            <button class="dropdown-nav-btn" data-direction="next" data-target="blend-mode-dropdown" title="Next">
                                <i class="ri-arrow-down-s-line"></i>
                            </button>
                        </div>

                        <!-- Hidden select for blend mode compatibility -->
                        <select id="blend-mode" style="display: none;">
                            <option value="smooth">Smooth Linear</option>
                            <option value="radial">Radial Burst</option>
                            <option value="diamond">Diamond Shape</option>
                            <option value="vortex">Swirling Vortex</option>
                        </select>
                    </div>
                </div>

                <div class="control-item">
                    <label>Seed <span class="value-display" id="seed-value">42</span></label>
                    <input type="range" class="slider" id="seed" min="0" max="999999" value="42">
                </div>

                <div class="control-item">
                    <label>Color Spread <span class="value-display" id="color-spread-value">0.7</span></label>
                    <input type="range" class="slider" id="color-spread" min="0.2" max="2.0" step="0.1" value="0.7">
                </div>

                <div class="control-item">
                    <label>Flow Intensity <span class="value-display" id="flow-intensity-value">0.3</span></label>
                    <input type="range" class="slider" id="flow-intensity" min="0.0" max="1.0" step="0.05" value="0.3">
                </div>

                <div class="control-item">
                    <label>Organic Distortion <span class="value-display" id="organic-distortion-value">0.2</span></label>
                    <input type="range" class="slider" id="organic-distortion" min="0.0" max="1.0" step="0.05" value="0.2">
            </div>

                <div class="control-item">
                    <label>Color Variance <span class="value-display" id="color-variance-value">0.1</span></label>
                    <input type="range" class="slider" id="color-variance" min="0.0" max="0.3" step="0.01" value="0.1">
                </div>
                

                <div class="control-item center-bias-control">
                    <label>Center Bias <span class="value-display" id="center-bias-value">0.5</span></label>
                    <input type="range" class="slider" id="center-bias" min="0.0" max="1.0" step="0.01" value="0.5">
                </div>
                
                <div class="control-item">
                    <label>Canvas Rotation <span class="value-display" id="canvas-rotation-value">0</span></label>
                    <input type="range" class="slider" id="canvas-rotation" min="0" max="360" step="1" value="0">
                </div>
            </div>

            <div class="control-group">
                <div class="control-group-header">
                <h3>Colors</h3>
                    <button class="randomize-colors-btn" id="randomize-colors" title="Randomize Colors">
                        <i class="ri-dice-line"></i>
                    </button>
                </div>
                
                <div class="control-item preset-upload-grid">
                    <div class="preset-section">
                        <label>Color Preset</label>
                        <div class="custom-dropdown-container">
                            <div class="custom-dropdown" id="color-preset-dropdown">
                                <div class="custom-dropdown-selected" id="color-preset-selected">
                                    <div class="option-left">
                                        <span class="color-preset-name">Choose preset...</span>
                                    </div>
                                    <i class="ri-arrow-down-s-line dropdown-arrow"></i>
                                </div>
                                <div class="custom-dropdown-options" id="color-preset-options">
                                    <div class="custom-dropdown-option" data-value="sunset">
                                        <div class="option-left">
                                            <span>Sunset</span>
                                        </div>
                                    </div>
                                    <div class="custom-dropdown-option" data-value="ocean">
                                        <div class="option-left">
                                            <span>Ocean</span>
                                        </div>
                                    </div>
                                    <div class="custom-dropdown-option" data-value="forest">
                                        <div class="option-left">
                                            <span>Forest</span>
                                        </div>
                                    </div>
                                    <div class="custom-dropdown-option" data-value="cosmic">
                                        <div class="option-left">
                                            <span>Cosmic</span>
                                        </div>
                                    </div>
                                    <div class="custom-dropdown-option" data-value="fire">
                                        <div class="option-left">
                                            <span>Fire</span>
                                        </div>
                                    </div>
                                    <div class="custom-dropdown-option" data-value="ice">
                                        <div class="option-left">
                                            <span>Ice</span>
                                        </div>
                                    </div>
                                    <div class="custom-dropdown-option" data-value="earth">
                                        <div class="option-left">
                                            <span>Earth</span>
                                        </div>
                                    </div>
                                    <div class="custom-dropdown-option" data-value="neon">
                                        <div class="option-left">
                                            <span>Neon</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="dropdown-nav">
                                <button class="dropdown-nav-btn" data-direction="prev" data-target="color-preset-dropdown" title="Previous">
                                    <i class="ri-arrow-up-s-line"></i>
                                </button>
                                <button class="dropdown-nav-btn" data-direction="next" data-target="color-preset-dropdown" title="Next">
                                    <i class="ri-arrow-down-s-line"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="upload-section">
                        <label>Analyze from Image</label>
                        <div class="upload-container">
                            <input type="file" id="image-upload" accept="image/*" style="display: none;">
                            <button class="upload-button" id="upload-btn" title="Upload an image to use as a color palette">
                                <i class="ri-image-add-line"></i> Upload Image
                            </button>
                            <span id="upload-status" class="upload-status"></span>
                        </div>
                    </div>
                </div>
                
                <div class="color-controls" id="color-controls">
                    <div class="color-item" draggable="true" data-color-index="0">
                        <div class="color-label-group">
                            <label>1.</label>
                            <button class="alpha-toggle" id="alpha-toggle-0" data-alpha="100" title="Toggle Opacity">
                                <i class="ri-eye-line"></i>
                            </button>
                        </div>
                        <input type="color" class="color-picker" id="color-0" value="#ff6b6b">
                        <i class="ri-draggable drag-handle"></i>
                    </div>
                    <div class="color-item" draggable="true" data-color-index="1">
                        <div class="color-label-group">
                            <label>2.</label>
                            <button class="alpha-toggle" id="alpha-toggle-1" data-alpha="100" title="Toggle Opacity">
                                <i class="ri-eye-line"></i>
                            </button>
                        </div>
                        <input type="color" class="color-picker" id="color-1" value="#4ecdc4">
                        <i class="ri-draggable drag-handle"></i>
                    </div>
                    <div class="color-item" draggable="true" data-color-index="2">
                        <div class="color-label-group">
                            <label>3.</label>
                            <button class="alpha-toggle" id="alpha-toggle-2" data-alpha="100" title="Toggle Opacity">
                                <i class="ri-eye-line"></i>
                            </button>
                        </div>
                        <input type="color" class="color-picker" id="color-2" value="#45b7d1">
                        <i class="ri-draggable drag-handle"></i>
                    </div>
                    <div class="color-item" draggable="true" data-color-index="3">
                        <div class="color-label-group">
                            <label>4.</label>
                            <button class="alpha-toggle" id="alpha-toggle-3" data-alpha="100" title="Toggle Opacity">
                                <i class="ri-eye-line"></i>
                            </button>
                        </div>
                        <input type="color" class="color-picker" id="color-3" value="#f9ca24">
                        <i class="ri-draggable drag-handle"></i>
                    </div>
                    <div class="color-item" draggable="true" data-color-index="4" style="display: none;">
                        <div class="color-label-group">
                            <label>5.</label>
                            <button class="alpha-toggle" id="alpha-toggle-4" data-alpha="100" title="Toggle Opacity">
                                <i class="ri-eye-line"></i>
                            </button>
                        </div>
                        <input type="color" class="color-picker" id="color-4" value="#6c5ce7">
                        <i class="ri-draggable drag-handle"></i>
                    </div>
                    <div class="color-item" draggable="true" data-color-index="5" style="display: none;">
                        <div class="color-label-group">
                            <label>6.</label>
                            <button class="alpha-toggle" id="alpha-toggle-5" data-alpha="100" title="Toggle Opacity">
                                <i class="ri-eye-line"></i>
                            </button>
                        </div>
                        <input type="color" class="color-picker" id="color-5" value="#fd79a8">
                        <i class="ri-draggable drag-handle"></i>
                    </div>
                    <button class="add-color-item" id="add-color-btn" title="Add Color">
                        <i class="ri-add-circle-line"></i>
                    </button>
                </div>
                
                <div class="trash-bin" id="trash-bin" title="Drag color here to remove">
                    <i class="ri-delete-bin-line"></i>
                </div>
            </div>

            <div class="control-group">
                <div class="control-group-header" style="margin-bottom:0px;">
                    <h3>Post Processing</h3>
                    <button class="post-processing-toggle" id="post-processing-toggle" title="Toggle Post Processing">
                        <i class="ri-toggle-line"></i>
                    </button>
                </div>

                <div class="post-processing-controls" id="post-processing-controls" style="display: none;">
                    <div class="control-item">
                        <label>Levels - Shadows <span class="value-display" id="levels-shadows-value">0</span></label>
                        <input type="range" class="slider" id="levels-shadows" min="-100" max="100" step="1" value="0">
                    </div>

                    <div class="control-item">
                        <label>Levels - Midtones <span class="value-display" id="levels-midtones-value">0</span></label>
                        <input type="range" class="slider" id="levels-midtones" min="-100" max="100" step="1" value="0">
                    </div>

                    <div class="control-item">
                        <label>Levels - Highlights <span class="value-display" id="levels-highlights-value">0</span></label>
                        <input type="range" class="slider" id="levels-highlights" min="-100" max="100" step="1" value="0">
                    </div>

                    <div class="control-item">
                        <label>Hue Shift <span class="value-display" id="hue-shift-value">0</span></label>
                        <input type="range" class="slider" id="hue-shift" min="-180" max="180" step="1" value="0">
            </div>

                    <div class="control-item">
                        <label>Saturation <span class="value-display" id="saturation-value">0</span></label>
                        <input type="range" class="slider" id="saturation" min="-100" max="100" step="1" value="0">
                    </div>

                <div class="control-item">
                    <label>Noise Amount <span class="value-display" id="noise-amount-value">0</span></label>
                    <input type="range" class="slider" id="noise-amount" min="0" max="100" step="1" value="0">
                </div>

                <div class="control-item">
                    <label>Noise Scale <span class="value-display" id="noise-scale-value">1.0</span></label>
                    <input type="range" class="slider" id="noise-scale" min="0.1" max="5.0" step="0.1" value="1.0">
                </div>

                <div class="post-processing-reset">
                    <button class="reset-button" id="reset-post-processing" title="Reset all post-processing to defaults">
                        Reset to Default
                    </button>
                </div>
                </div>
            </div>

            <div class="control-group">
                <h3>Output</h3>

            <div class="composition-controls">
                <h4>Composition</h4>
                
                <div class="composition-status">
                    <small id="resolution-status">Gradient Engine - Ready</small>
                </div>
                
                <div class="composition-info">
                    <div class="composition-values">
                        <small id="composition-offset">Offset: 0, 0</small>
                        <small id="composition-zoom">Zoom: 1.0x</small>
                    </div>
                    <button class="button secondary" id="reset-composition">Reset View</button>
                </div>
                
                <div class="composition-help">
                    <small>Drag canvas to pan • Scroll to zoom</small>
                </div>
                </div>
            </div>

            <div class="control-group export-status-group">
                <div class="export-controls">
                    <button class="randomize-colors-btn" id="undo" disabled title="Undo">
                        <i class="ri-arrow-go-back-line"></i>
                    </button>
                    <button class="randomize-colors-btn" id="redo" disabled title="Redo">
                        <i class="ri-arrow-go-forward-line"></i>
                    </button>
                    <button class="button export-button" id="export">Export Image</button>
                    <button class="randomize-colors-btn" id="info-btn" title="About Gradient Generator">
                        <i class="ri-information-line"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Info Modal -->
    <div class="modal-overlay" id="info-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>About</h2>
                <button class="modal-close" id="modal-close">
                    <i class="ri-close-line"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="about-section">
                    <p>A gradient generator that creates customizable gradients using noise algorithms and blend modes.</p>
                </div>

                <div class="about-section">
                    <h3>Processing</h3>
                    <p>All image processing and color analysis happens locally in your browser. No images are uploaded to external servers.</p>
                </div>

                <div class="about-section">
                    <h3>Privacy</h3>
                    <p>Your images and generated gradients remain private and are not stored or transmitted anywhere.</p>
                </div>

                <div class="about-section">
                    <a href="https://github.com/LandoNikko/Gradient-Generator" target="_blank" class="github-link">
                        View on GitHub
                    </a>
                </div>
            </div>
        </div>
    </div>

    <script type="module" src="app.js"></script>
</body>
</html>